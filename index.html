<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartExchange</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800;900&display=swap" rel="stylesheet">
  <style>
    /* --- –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –∏ —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ --- */
    body.night-mode {
      background:
        radial-gradient(circle at 10% 40%, #222 0%, transparent 60%),
        radial-gradient(circle at 80% 60%, #181F36 0%, transparent 60%),
        linear-gradient(120deg, #232e48 0%, #181F36 40%, #222 100%);
      color: #dbecff;
      transition: background 1s;
    }
    .night-stars {
      display: none;
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 998;
    }
    body.night-mode .night-stars {
      display: block;
      animation: fadeInUp 2s;
    }
    .star {
      position: absolute;
      border-radius: 50%;
      background: #fff;
      opacity: 0.7;
      animation: twinkle 3s infinite;
    }
    @keyframes twinkle {
      0%,100% { opacity: 0.7;}
      50% { opacity: 0.2;}
    }
    #toggleTheme {
      position: fixed;
      top: 85px;
      right: 24px;
      z-index: 2000;
      background: #181F36;
      color: #ffb300;
      padding: 10px 22px;
      border-radius: 22px;
      border: none;
      font-weight: bold;
      font-size: 1.15em;
      box-shadow: 0 0 14px #181F36cc;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }
    body.night-mode #toggleTheme {
      background: #222;
      color: #09d6f8;
      box-shadow: 0 0 22px #09d6f8bb;
    }
    #openChat {
      position:fixed;
      bottom:90px;
      right:24px;
      z-index:2000;
      background:#09d6f8;
      color:#fff;
      padding:13px 22px;
      border-radius:30px;
      border:none;
      font-weight:bold;
      box-shadow:0 0 12px #09d6f8cc;
      cursor:pointer;
      transition: background 0.4s;
    }
    #openChat.night {
      background: #222;
      color: #09d6f8;
      box-shadow: 0 0 14px #09d6f8;
    }
    #chatWindow {
      display:none;
      position:fixed;
      bottom:24px;
      right:24px;
      z-index:2000;
      background:#181F36;
      border-radius:18px;
      box-shadow:0 0 24px #09d6f8aa;
      width:350px;
      max-width:95vw;
      animation: fadeInUp .6s;
    }
    body.night-mode #chatWindow {
      background:#232e48;
      box-shadow:0 0 40px #09d6f8cc;
      color: #dbecff;
    }
    #chatWindow header {
      padding:16px 16px 12px 16px;
      border-bottom:1px solid #09d6f8;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    #chatWindow header span {
      font-weight:bold;
      color:#09d6f8;
    }
    #chatWindow header button {
      background:none;
      border:none;
      font-size:22px;
      color:#fff;
      cursor:pointer;
    }
    #chatMessages {
      height:210px;
      overflow-y:auto;
      padding:12px;
      background:#222;
      color:#e0f2fe;
      font-size:15px;
    }
    body.night-mode #chatMessages {
      background: #232e48;
      color: #dbecff;
    }
    #chatMessages .faqquick {
      margin-top:10px;
      background:#222a;
      padding:7px 11px;
      border-radius:10px;
      color:#bae6fd;
    }
    #chatForm {
      display:flex;
      border-top:1px solid #09d6f8;
    }
    #chatInput {
      flex:1;
      padding:10px 12px;
      border:none;
      border-radius:0 0 0 18px;
      background:#222;
      color:#fff;
    }
    body.night-mode #chatInput {
      background: #232e48;
      color: #dbecff;
    }
    #chatForm button {
      background:#09d6f8;
      color:#fff;
      padding:0 18px;
      border:none;
      border-radius:0 0 18px 0;
      font-weight:bold;
      cursor:pointer;
    }
    body.night-mode #chatForm button {
      background: #09d6f8;
      color: #222;
    }
    /* --- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–∑ —Ç–≤–æ–µ–≥–æ —Å–∞–π—Ç–∞ --- */
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      min-height: 100vh;
      color: #f1f5f9;
      background:
        radial-gradient(circle at 20% 30%, #06b6d4 0%, transparent 65%),
        radial-gradient(circle at 80% 70%, #fbbf24 0%, transparent 60%),
        linear-gradient(120deg, #0b1220 0%, #181F36 40%, #09d6f8 100%);
      position: relative;
      overflow-x: hidden;
    }
    body::before {
      content: "";
      position: fixed;
      top: -180px; left: -150px;
      width: 700px; height: 600px;
      background: radial-gradient(circle, #09d6f8cc 0%, transparent 80%);
      opacity: 0.35;
      z-index: 0;
      filter: blur(24px);
    }
    body::after {
      content: "";
      position: fixed;
      bottom: -220px; right: -180px;
      width: 600px; height: 600px;
      background: radial-gradient(circle, #fbbf2488 0%, transparent 80%);
      opacity: 0.20;
      z-index: 0;
      filter: blur(30px);
    }
    /* ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–≤–æ–∏ —Å—Ç–∏–ª–∏, –ù–ï –∏–∑–º–µ–Ω—è–ª–∏—Å—å) ... */
  </style>
</head>
<body>
  <!-- –ö–Ω–æ–ø–∫–∞ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –∏ –∑–≤—ë–∑–¥—ã -->
  <button id="toggleTheme">üåô</button>
  <div class="night-stars" id="nightStars"></div>
  <!-- –ö–Ω–æ–ø–∫–∞ –∏ –æ–∫–Ω–æ —á–∞—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
  <button id="openChat">–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</button>
  <div id="chatWindow">
    <header>
      <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–Ω–ª–∞–π–Ω</span>
      <button onclick="document.getElementById('chatWindow').style.display='none'">√ó</button>
    </header>
    <div id="chatMessages">
      <div>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–∂–µ–º –ø–æ–º–æ—á—å?</div>
      <div class="faqquick">üß† –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã:<br>
        <button onclick="chatFaq('–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏?')">–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏</button>
        <button onclick="chatFaq('–°–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å –≤—ã–ø–ª–∞—Ç—É?')">–û –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–ª–∞—Ç</button>
        <button onclick="chatFaq('–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±–º–µ–Ω?')">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±–º–µ–Ω</button>
      </div>
    </div>
    <form id="chatForm">
      <input id="chatInput" type="text" autocomplete="off" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å...">
      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
  </div>
  <!-- –î–∞–ª—å—à–µ –∏–¥—ë—Ç —Ç–≤–æ–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ -->
  <nav class="smart-navbar">
    <div class="nav-logo">
      <span class="nav-logo-main">Smart</span><span class="nav-logo-accent">Exchange</span>
    </div>
    <ul class="nav-menu">
      <li class="active" data-tab="home"><a href="#">–ì–ª–∞–≤–Ω–∞—è</a></li>
      <li data-tab="rules"><a href="#">–ü—Ä–∞–≤–∏–ª–∞</a></li>
      <li data-tab="faq"><a href="#">FAQ</a></li>
      <li data-tab="news"><a href="#">–ù–æ–≤–æ—Å—Ç–∏</a></li>
      <li data-tab="contacts"><a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
    </ul>
  </nav>
  <div class="ticker">
    <marquee behavior="scroll" direction="left" id="cryptoTicker">–ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤...</marquee>
  </div>
  <div class="crypto-labels-bg">
    <span class="crypto-label btc">BTC</span>
    <span class="crypto-label eth">ETH</span>
    <span class="crypto-label usdt">USDT</span>
    <span class="crypto-label trx">TRX</span>
    <span class="crypto-label xrp">XRP</span>
    <span class="crypto-label sol">SOL</span>
    <span class="crypto-label bnb">BNB</span>
    <span class="crypto-label shib">SHIB</span>
    <span class="crypto-label ltc">LTC</span>
    <span class="crypto-label ton">TON</span>
    <span class="crypto-label dot">DOT</span>
    <span class="crypto-label ada">ADA</span>
  </div>
  <div id="main-title-box" class="main-title-box">–ë—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ</div>
  <div id="page-home" class="page-section home-content"></div>
  <div id="page-rules" class="page-section">
    <h2>–ü—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–∏—Å–∞</h2>
    <!-- ... (–æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å–µ–∫—Ü–∏–∏) ... -->
  </div>
  <div id="page-faq" class="page-section">
    <h2>FAQ</h2>
    <!-- ... (FAQ –∫–æ–Ω—Ç–µ–Ω—Ç) ... -->
  </div>
  <div id="page-news" class="page-section">
    <h2>–ù–æ–≤–æ—Å—Ç–∏</h2>
    <!-- ... (–Ω–æ–≤–æ—Å—Ç–∏) ... -->
  </div>
  <div id="page-contacts" class="page-section">
    <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
    <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –≤–æ–ø—Ä–æ—Å–æ–≤.</p>
  </div>
  <div class="container" id="main-exchange">
    <h1 class="brand-title">
      <span class="brand-gradient">SmartExchange</span>
      <span class="brand-orbit"></span>
    </h1>
    <label>–í—ã –æ—Ç–¥–∞—ë—Ç–µ:</label>
    <select id="from">
      <option>USDT</option><option>BTC</option><option>ETH</option><option>XRP</option><option>SOL</option>
      <option>BNB</option><option>ADA</option><option>AVAX</option><option>DOT</option><option>TRX</option>
      <option>LINK</option><option>MATIC</option><option>TON</option><option>LTC</option><option>SHIB</option>
      <option>WBTC</option><option>ICP</option><option>UNI</option><option>BCH</option><option>XLM</option>
    </select>
    <label>–°—É–º–º–∞:</label>
    <input type="number" id="amount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" min="0.000001" step="any">
    <label>–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:</label>
    <select id="to">
      <option>USDT</option><option>BTC</option><option>ETH</option><option>XRP</option><option>SOL</option>
      <option>BNB</option><option>ADA</option><option>AVAX</option><option>DOT</option><option>TRX</option>
      <option>LINK</option><option>MATIC</option><option>TON</option><option>LTC</option><option>SHIB</option>
      <option>WBTC</option><option>ICP</option><option>UNI</option><option>BCH</option><option>XLM</option>
    </select>
    <button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    <div class="result" id="output">–í—ã –ø–æ–ª—É—á–∏—Ç–µ: 0</div>
    <label>–í–∞—à –∫–æ—à–µ–ª—ë–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è:</label>
    <input type="text" id="userWallet" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞" autocomplete="off">
    <label>–í–∞—à–∞ –ø–æ—á—Ç–∞:</label>
    <input type="text" id="userEmail" placeholder="example@email.com" autocomplete="email">
    <button onclick="showConfirm()">–û–±–º–µ–Ω—è—Ç—å</button>
  </div>
  <a class="support" href="https://t.me/SmartExchangeSup" target="_blank">Support</a>
  <div id="confirmModal" class="modal">
    <div class="modal-content">
      <button class="close-x" onclick="closeModal('confirmModal')">&times;</button>
      <p><b>–ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏:</b> <span id="orderId"></span></p>
      <p><b>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ–±–º–µ–Ω:</b></p>
      <p id="exchangeDetails"></p>
      <p><b>–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞:</b></p>
      <p style="word-break: break-all;">
        <span id="payAddr">TVzzk2Ev9FkZ82CKVokLXjmXDWna1NWbAT</span>
        <button onclick="copyAddr()" style="margin-left:8px;background:#09d6f8;color:#fff;padding:5px 10px;border-radius:8px;border:none;box-shadow:0 2px 8px #09d6f888;cursor:pointer;">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      </p>
      <button onclick="confirmExchange()">–°–æ–≤–µ—Ä—à–∏—Ç—å –æ–±–º–µ–Ω</button>
    </div>
  </div>
  <div id="successModal" class="modal">
    <div class="modal-content">
      <button class="close-x" onclick="closeModal('successModal')">&times;</button>
      <p>–ó–∞—è–≤–∫–∞ –Ω–∞ –æ–±–º–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ ‚úÖ</p>
      <p>–û–∂–∏–¥–∞–π—Ç–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç.</p>
    </div>
  </div>
  <div class="features">
    <div class="feature-box">
      <span class="dynamic-title">‚ö° –ë—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ</span>
      <div id="feature-speed">
        <p>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±–º–µ–Ω–∞ USDT ‚Üí BTC ‚Äî 7 –º–∏–Ω—É—Ç</p>
        <p>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±–º–µ–Ω–∞ BTC ‚Üí USDT ‚Äî 15 –º–∏–Ω—É—Ç</p>
        <p>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±–º–µ–Ω–∞ USDT ‚Üí LTC ‚Äî 5 –º–∏–Ω—É—Ç</p>
      </div>
    </div>
    <div class="feature-box">
      <span class="dynamic-title">üí∏ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–º–µ–Ω—ã</span>
      <div id="recent-trades">
        <p>BTC 0.32 ‚Üí USDT 34,458.72</p>
        <p>BTC 0.11 ‚Üí USDT 11,845.18</p>
        <p>XRP 756 ‚Üí USDT 2,506.12</p>
      </div>
    </div>
  </div>
  <script>
    // --- JS –¥–ª—è –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –∏ —á–∞—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ---
    function genStars(n) {
      const stars = [];
      for (let i = 0; i < n; i++) {
        const size = Math.random() * 2 + 1;
        const left = Math.random() * 98;
        const top = Math.random() * 98;
        stars.push(`<div class="star" style="width:${size}px;height:${size}px;left:${left}vw;top:${top}vh;"></div>`);
      }
      return stars.join('');
    }
    document.getElementById('nightStars').innerHTML = genStars(56);

    let night = false;
    document.getElementById('toggleTheme').onclick = function(){
      night = !night;
      document.body.classList.toggle('night-mode', night);
      document.getElementById('toggleTheme').textContent = night ? "‚òÄÔ∏è" : "üåô";
      document.getElementById('openChat').classList.toggle('night', night);
    };

    document.getElementById('openChat').onclick = function(){
      document.getElementById('chatWindow').style.display='block';
    };
    function chatFaq(q){
      document.getElementById('chatInput').value = q;
      document.getElementById('chatForm').dispatchEvent(new Event('submit'));
    }
    document.getElementById('chatForm').onsubmit = function(e){
      e.preventDefault();
      let msg = document.getElementById('chatInput').value.trim();
      if(!msg) return;
      let chat = document.getElementById('chatMessages');
      chat.innerHTML += `<div style="background:#09d6f8;padding:7px 11px;border-radius:10px;color:#fff;margin-top:8px;text-align:right;max-width:98%;">${msg}</div>`;
      let answer = '';
      if(msg.toLowerCase().includes('—Å—Ç–∞—Ç—É—Å')) answer = '–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–æ –Ω–æ–º–µ—Ä—É –∑–∞—è–≤–∫–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –µ–≥–æ, –∏ –º—ã –ø—Ä–æ–≤–µ—Ä–∏–º!';
      else if(msg.toLowerCase().includes('–≤—ã–ø–ª–∞—Ç')) answer = '–í—ã–ø–ª–∞—Ç–∞ –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 5‚Äì15 –º–∏–Ω—É—Ç.';
      else if(msg.toLowerCase().includes('–æ–±–º–µ–Ω')) answer = '–í—ã –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–º–µ–Ω–∞, –≤–≤–æ–¥–∏—Ç–µ —Å—É–º–º—É –∏ –∫–æ—à–µ–ª—ë–∫, –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ –∑–∞—è–≤–∫—É!';
      else answer = '–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å! –û–ø–µ—Ä–∞—Ç–æ—Ä —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.';
      chat.innerHTML += `<div style="background:#222a;padding:7px 11px;border-radius:10px;color:#bae6fd;margin-top:8px;max-width:90%;">${answer}</div>`;
      chat.scrollTop = chat.scrollHeight;
      document.getElementById('chatInput').value = '';
    };

    // --- –î–∞–ª—å—à–µ —Ç–≤–æ–π –∏—Å—Ö–æ–¥–Ω—ã–π JS ---
    const navMenuItems = document.querySelectorAll('.nav-menu li');
    const sections = document.querySelectorAll('.page-section');
    const mainExchange = document.getElementById('main-exchange');
    const mainTitleBox = document.getElementById('main-title-box');
    navMenuItems.forEach(item => {
      item.addEventListener('click', function (e) {
        e.preventDefault();
        navMenuItems.forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        const tab = item.getAttribute('data-tab');
        sections.forEach(sec => {
          sec.classList.remove('active');
          if (sec.id === 'page-' + tab) sec.classList.add('active');
        });
        if (tab === "home") {
          mainExchange.style.display = "block";
          mainTitleBox.style.display = "block";
        } else {
          mainExchange.style.display = "none";
          mainTitleBox.style.display = "none";
        }
        window.scrollTo({top: 0, behavior: 'smooth'});
      });
    });
    mainExchange.style.display = "block";
    mainTitleBox.style.display = "block";
    const coins = [
      "USDT","BTC","ETH","XRP","SOL","BNB","ADA","AVAX","DOT","TRX",
      "LINK","MATIC","TON","LTC","SHIB","WBTC","ICP","UNI","BCH","XLM"
    ];
    const baseRates = {
      USDT: 1,
      BTC: 29000,
      ETH: 1800,
      XRP: 0.6,
      SOL: 22,
      BNB: 240,
      ADA: 0.26,
      AVAX: 12,
      DOT: 5,
      TRX: 0.08,
      LINK: 7.5,
      MATIC: 0.7,
      TON: 7,
      LTC: 85,
      SHIB: 0.00001,
      WBTC: 29000,
      ICP: 3.7,
      UNI: 6,
      BCH: 210,
      XLM: 0.12,
    };
    const rates = {};
    for (let i = 0; i < coins.length; i++) {
      for (let j = 0; j < coins.length; j++) {
        const from = coins[i], to = coins[j];
        if (from === to) {
          rates[`${from}->${to}`] = 1;
        } else {
          rates[`${from}->${to}`] = baseRates[from] / baseRates[to];
        }
      }
    }
    let latestResult = 0;
    function escapeHTML(str) {
      return String(str).replace(/</g, "&lt;").replace(/>/g, "&gt;");
    }
    function calculate() {
      const from = document.getElementById("from").value;
      const to = document.getElementById("to").value;
      const amount = parseFloat(document.getElementById("amount").value);
      const key = `${from}->${to}`;
      if (!rates[key] || isNaN(amount) || amount <= 0) {
        document.getElementById("output").innerText = "–í—ã –ø–æ–ª—É—á–∏—Ç–µ: 0";
        latestResult = 0;
        return;
      }
      latestResult = amount * rates[key];
      document.getElementById("output").innerText = "–í—ã –ø–æ–ª—É—á–∏—Ç–µ: " + latestResult.toFixed(6);
    }
    function isEmail(email) {
      return /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email);
    }
    function showConfirm() {
      const from = document.getElementById("from").value;
      const to = document.getElementById("to").value;
      const amount = document.getElementById("amount").value;
      const wallet = document.getElementById("userWallet").value;
      const email = document.getElementById("userEmail").value;
      let errorMsg = "";
      if (!amount || isNaN(amount) || amount <= 0) errorMsg += "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É.<br>";
      if (!wallet || wallet.length < 5) errorMsg += "–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞.<br>";
      if (!email || !isEmail(email)) errorMsg += "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ø–æ—á—Ç—É.<br>";
      if (latestResult === 0) errorMsg += "–ù–∞–∂–º–∏—Ç–µ ¬´–†–∞—Å—Å—á–∏—Ç–∞—Ç—å¬ª –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∫—É—Ä—Å–∞.<br>";
      if (errorMsg) {
        document.getElementById("output").innerHTML = `<span style="color:#ff8888">${errorMsg}</span>`;
        return;
      }
      document.getElementById("output").innerHTML = "";
      const orderId = Math.floor(100000 + Math.random() * 900000);
      document.getElementById("orderId").innerText = orderId;
      const details = `
        –í—ã –æ—Ç–¥–∞—ë—Ç–µ: ${escapeHTML(amount)} ${escapeHTML(from)},<br>
        –ü–æ–ª—É—á–∞–µ—Ç–µ: ${escapeHTML(latestResult.toFixed(6))} ${escapeHTML(to)}<br>
        –ö–æ—à–µ–ª—ë–∫: ${escapeHTML(wallet)}<br>
        –ü–æ—á—Ç–∞: ${escapeHTML(email)}
      `;
      document.getElementById("exchangeDetails").innerHTML = details;
      document.getElementById("confirmModal").style.display = "block";
    }
    function confirmExchange() {
      closeModal("confirmModal");
      document.getElementById("successModal").style.display = "block";
      setTimeout(() => {
        closeModal("successModal");
      }, 5000);
    }
    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }
    function copyAddr() {
      const addr = document.getElementById('payAddr').textContent;
      if (navigator.clipboard) {
        navigator.clipboard.writeText(addr);
        showToast("–ê–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
      }
    }
    function showToast(msg) {
      let t = document.createElement("div");
      t.className = "toast";
      t.innerText = msg;
      document.body.appendChild(t);
      setTimeout(()=>{t.style.opacity="1";}, 100);
      setTimeout(()=>{t.style.opacity="0";}, 1500);
      setTimeout(()=>{document.body.removeChild(t);}, 1800);
    }
    async function loadTicker() {
      try {
        const res = await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1");
        const data = await res.json();
        const text = data.map(coin => `${coin.symbol.toUpperCase()}: $${coin.current_price}`).join(" | ");
        document.getElementById("cryptoTicker").innerText = text;
      } catch (error) {
        document.getElementById("cryptoTicker").innerText = "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫—É—Ä—Å—ã.";
      }
    }
    const recentCoins = ['BTC', 'ETH', 'USDT', 'XRP', 'SOL', 'BNB', 'ADA', 'DOT', 'TRX', 'SHIB', 'LTC', 'TON'];
    const coinRates = {BTC: 29000, ETH: 1850, USDT: 1, XRP: 0.56, SOL: 22, BNB: 240, ADA: 0.26, DOT: 5, TRX: 0.08, SHIB: 0.00001, LTC: 85, TON: 7};
    function randomTrade() {
      let fromIdx = Math.floor(Math.random() * recentCoins.length);
      let toIdx;
      do { toIdx = Math.floor(Math.random() * recentCoins.length); } while (toIdx === fromIdx);
      const fromCoin = recentCoins[fromIdx];
      const toCoin = recentCoins[toIdx];
      const amountFrom = +(Math.random() * (fromCoin === 'USDT' ? 2000 : fromCoin === 'BTC' ? 1 : 400)).toFixed(fromCoin === 'BTC' ? 2 : 0);
      const rate = coinRates[fromCoin] / coinRates[toCoin];
      const amountTo = +(amountFrom * rate).toFixed(toCoin === 'USDT' ? 2 : toCoin === 'BTC' ? 3 : 0);
      return `${fromCoin} ${amountFrom} ‚Üí ${toCoin} ${amountTo}`;
    }
    function updateRecentTrades() {
      const trades = [];
      for (let i = 0; i < 3; i++) trades.push(randomTrade());
      document.getElementById('recent-trades').innerHTML = trades.map(t => `<p>${t}</p>`).join('');
    }
    updateRecentTrades();
    setInterval(updateRecentTrades, 3500);
    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        closeModal("confirmModal");
        closeModal("successModal");
      }
    };
    loadTicker();
    setInterval(loadTicker, 60000);
  </script>
</body>
</html>
